{
  "body_html": "<div><head></head><body>&#x7B2C;&#x56DB;&#x8282; Logstash &#x914D;&#x7F6E;\n    \n    \n    \n    \n    \n  <link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910235-976bcd3a-7a9c-473d-b800-1b1df54807d4.css\" rel=\"stylesheet\" type=\"text/css\">\n<link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910286-64db0dd0-ac29-46fb-9241-76ef318b1b53.css\" rel=\"stylesheet\" type=\"text/css\">\n\n  \n        \n<div class=\"page\">\n    \n        <h1 class=\"book-chapter\" id=\"calibre_toc_10\">&#x7B2C;&#x56DB;&#x8282; Logstash &#x914D;&#x7F6E;</h1>\n        <div class=\"section\">\n            <h1 id=\"&#x7B2C;&#x56DB;&#x8282;-logstash-&#x57FA;&#x672C;&#x914D;&#x7F6E;\" class=\"calibre7\">&#x7B2C;&#x56DB;&#x8282; Logstash &#x57FA;&#x672C;&#x914D;&#x7F6E;</h1>\n<h2 id=\"1&#x3001;logstash&#x626E;&#x6F14;&#x7684;&#x89D2;&#x8272;\" class=\"calibre8\">1&#x3001;Logstash&#x626E;&#x6F14;&#x7684;&#x89D2;&#x8272;</h2>\n<p class=\"calibre12\"><img src=\"data/img/1588213925606-5d9bc5ee-ba1e-40a9-be3f-4e598d39d3c2.jpg\" class=\"calibre14\"></p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">Shipper: &#x627F;&#x8FD0;&#x5546;&#xFF0C;&#x6258;&#x8FD0;&#x4EBA;&#xFF0C;&#x53D1;&#x8D27;&#x4EBA;;</li>\n<li class=\"calibre18\">Broker: &#x7ECF;&#x7EAA;&#x4EBA;; &#x4E2D;&#x95F4;&#x4EBA;&#xFF0C;&#x4EE3;&#x7406;&#x4EBA;; </li>\n<li class=\"calibre18\">Indexer: &#x5206;&#x5EA6;&#x5668;&#xFF0C;&#x7F16;&#x7D22;&#x5F15;&#x7684;&#x4EBA;;</li>\n</ul>\n<h2 id=\"2&#x3001;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x8BED;&#x6CD5;\" class=\"calibre13\">2&#x3001;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x8BED;&#x6CD5;</h2>\n<p class=\"calibre12\">Logstash &#x8BBE;&#x8BA1;&#x4E86;&#x81EA;&#x5DF1;&#x7684;DSL&#xFF08;domain specific language&#xFF09;</p>\n<h3 id=\"21&#x3001;&#x533A;&#x6BB5;&#xFF08;section&#xFF09;\" class=\"calibre9\">2.1&#x3001;&#x533A;&#x6BB5;&#xFF08;section&#xFF09;</h3>\n<p class=\"calibre12\">Logstash&#x7528;{}&#x6765;&#x5B9A;&#x4E49;&#x533A;&#x57DF;&#x3002;&#x533A;&#x57DF;&#x5185;&#x53EF;&#x4EE5;&#x5305;&#x62EC;&#x63D2;&#x4EF6;&#x533A;&#x57DF;&#x5B9A;&#x4E49;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x4E2A;&#x533A;&#x57DF;&#x5185;&#x5B9A;&#x4E49;&#x591A;&#x4E2A;&#x63D2;&#x4EF6;&#x3002;&#x63D2;&#x4EF6;&#x533A;&#x57DF;&#x5219;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x952E;&#x503C;&#x5BF9;&#x8BBE;&#x7F6E;&#x3002;&#x793A;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">input\n{\n  stdin{}\n  syslog{}\n}\n</code></pre><h3 id=\"22&#x3001;&#x6570;&#x636E;&#x7C7B;&#x578B;\" class=\"calibre9\">2.2&#x3001;&#x6570;&#x636E;&#x7C7B;&#x578B;</h3>\n<p class=\"calibre12\">Logstash &#x652F;&#x6301;&#x5C11;&#x91CF;&#x7684;&#x6570;&#x636E;&#x503C;&#x7C7B;&#x578B;&#xFF1A;</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\"><p class=\"calibre12\">bool</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">debug =&gt; true\n</code></pre></li>\n<li class=\"calibre18\"><p class=\"calibre12\">string</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">host =&gt; &quot;hostname&quot;\n</code></pre></li>\n<li class=\"calibre18\"><p class=\"calibre12\">nubmer</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">port =&gt; 514\n</code></pre></li>\n<li class=\"calibre18\"><p class=\"calibre12\">array</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">match =&gt;[&quot;datetime&quot;, &quot;UNIX&quot;, &quot;ISO8601&quot;]\n</code></pre></li>\n<li class=\"calibre18\"><p class=\"calibre12\">hash</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">options =&gt;\n{\n  key1 =&gt; &quot;value1&quot;,\n  key2 =&gt; &quot;value2&quot;\n}\n</code></pre></li>\n</ul>\n<h3 id=\"23&#x3001;&#x5B57;&#x6BB5;&#x5F15;&#x7528;field-reference\" class=\"calibre9\">2.3&#x3001;&#x5B57;&#x6BB5;&#x5F15;&#x7528;(field reference)</h3>\n<h3 id=\"24&#x3001;&#x6761;&#x4EF6;&#x5224;&#x65AD;condition\" class=\"calibre9\">2.4&#x3001;&#x6761;&#x4EF6;&#x5224;&#x65AD;(condition)</h3>\n<p class=\"calibre12\">&#x8868;&#x8FBE;&#x5F0F;&#x652F;&#x6301;&#x4E0B;&#x9762;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x7B26;&#xFF1A;</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">==(&#x7B49;&#x4E8E;), !=(&#x4E0D;&#x7B49;&#x4E8E;), &lt;(&#x5C0F;&#x4E8E;), &gt;(&#x5927;&#x4E8E;), &lt;=(&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;), &gt;=(&#x5927;&#x4E8E;&#x7B49;&#x4E8E;)</li>\n<li class=\"calibre18\">=~(&#x5339;&#x914D;&#x6B63;&#x5219;), !~&#xFF08;&#x4E0D;&#x5339;&#x914D;&#x6B63;&#x5219;&#xFF09;</li>\n<li class=\"calibre18\">in(&#x5305;&#x542B;), not in(&#x4E0D;&#x5305;&#x542B;)</li>\n<li class=\"calibre18\">and(&#x4E0E;), or(&#x6216;), nand(&#x975E;&#x4E0E;), xor(&#x975E;&#x6216;)</li>\n<li class=\"calibre18\">()(&#x590D;&#x5408;&#x8868;&#x8FBE;&#x5F0F;), !()(&#x5BF9;&#x590D;&#x5408;&#x8868;&#x8FBE;&#x5F0F;&#x7ED3;&#x679C;&#x53D6;&#x53CD;)</li>\n</ul>\n<p class=\"calibre12\">&#x901A;&#x5E38;&#x6765;&#x8BF4;&#xFF0C;&#x4F60;&#x90FD;&#x4F1A;&#x5728;&#x8868;&#x8FBE;&#x5F0F;&#x91CC;&#x7528;&#x5230;&#x5B57;&#x6BB5;&#x5F15;&#x7528;&#x3002;&#x4E3A;&#x4E86;&#x5C3D;&#x91CF;&#x5C55;&#x793A;&#x5168;&#x9762;&#x5404;&#x79CD;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4E0B;&#x9762;&#x865A;&#x62DF;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;&#xFF1A;</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">if &quot;_grokparsefailure&quot; not in [tags] \n{\n\n} \nelse if [status] !~ /^2\\d\\d/ or ( [url] == &quot;/noc.gif&quot; nand [geoip][city] != &quot;beijing&quot; ) \n{\n\n} \nelse \n{\n\n}\n</code></pre><h3 id=\"25&#x3001;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;\" class=\"calibre9\">2.5&#x3001;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;</h3>\n<ul class=\"calibre17\">\n<li class=\"calibre18\"><p class=\"calibre12\">-e<br class=\"calibre21\">&#x6267;&#x884C;logstash&#x7A0B;&#x5E8F;</p>\n</li>\n<li class=\"calibre18\"><p class=\"calibre12\">--config &#x6216; -f<br class=\"calibre21\">&#x5F15;&#x5165;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x8DEF;&#x5F84;&#x4E3A;/etc/logstash/conf.d&#x3002;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x201C;-f /etc/logstash/conf.d/&#x201C;&#xFF0C;&#x4F1A;&#x5C06;&#x8BE5;&#x76EE;&#x5F55;&#x4E2D;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x6309;&#x7167;&#x6587;&#x4EF6;&#x540D;&#x7684;&#x5B57;&#x6BCD;&#x987A;&#x5E8F;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#x3002;</p>\n</li>\n<li class=\"calibre18\"><p class=\"calibre12\">--configtest &#x6216; -t</p>\n</li>\n</ul>\n<p class=\"calibre12\">&#x7528;&#x6765;&#x6D4B;&#x8BD5;Logstash&#x8BFB;&#x53D6;&#x5230;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BED;&#x6CD5;&#x662F;&#x5426;&#x80FD;&#x6B63;&#x5E38;&#x89E3;&#x6790;&#x3002;Logstash&#x914D;&#x7F6E;&#x8BED;&#x6CD5;&#x662F;&#x7528;grammar.treetop&#x5B9A;&#x4E49;&#x7684;&#x3002;&#x5C24;&#x5176;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x4E0A;&#x4E00;&#x6761;&#x63D0;&#x5230;&#x7684;&#x8BFB;&#x53D6;&#x76EE;&#x5F55;&#x65B9;&#x5F0F;&#x7684;&#x8BFB;&#x8005;&#xFF0C;&#x5C24;&#x5176;&#x8981;&#x63D0;&#x524D;&#x6D4B;&#x8BD5;&#x3002;</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">--log &#x6216; -l</li>\n</ul>\n<p class=\"calibre12\">Logstash&#x9ED8;&#x8BA4;&#x8F93;&#x51FA;&#x65E5;&#x5FD7;&#x5230;&#x6807;&#x51C6;&#x9519;&#x8BEF;&#x3002;&#x751F;&#x6210;&#x73AF;&#x5883;&#x4E0B;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;bin/logstash -l logs/logstash.log &#x547D;&#x4EE4;&#x7EDF;&#x4E00;&#x5B58;&#x50A8;&#x65E5;&#x5FD7;</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">--pipeline-workers &#x6216; -w</li>\n</ul>\n<p class=\"calibre12\">&#x8FD0;&#x884C;filter&#x548C;output&#x7684;pipeline&#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#x3002;&#x9ED8;&#x8BA4;&#x662F;cpu&#x7684;&#x6838;&#x6570;&#x3002;</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">--pipeline-batch-size &#x6216; -b</li>\n</ul>\n<p class=\"calibre12\">&#x6BCF;&#x4E2A;Logstash Pipeline&#x7EBF;&#x7A0B;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x5177;&#x4F53;&#x7684;filter&#x548C;output&#x51FD;&#x6570;&#x4E4B;&#x524D;&#xFF0C;&#x505A;&#x591A;&#x80FD;&#x79EF;&#x7D2F;&#x7684;&#x65E5;&#x5FD7;&#x6761;&#x6570;&#x3002;&#x9ED8;&#x8BA4;&#x662F;125&#x6761;&#x3002;&#x8FD9;&#x4E2A;&#x503C;&#x8D8A;&#x5927;Logstash&#x7684;&#x6027;&#x80FD;&#x4F1A;&#x8D8A;&#x597D;&#xFF0C;&#x540C;&#x6837;&#x4E5F;&#x4F1A;&#x6D88;&#x8017;&#x8D8A;&#x591A;&#x7684;JVM&#x5185;&#x5B58;&#x3002;</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">--pipeline-batch-delay &#x6216; -u</li>\n</ul>\n<p class=\"calibre12\">&#x6BCF;&#x4E2A;Logstash pipeline&#x7EBF;&#x7A0B;&#xFF0C;&#x5728;&#x6253;&#x5305;&#x6279;&#x91CF;&#x65E5;&#x5FD7;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6700;&#x591A;&#x7B49;&#x5F85;&#x51E0;&#x6BEB;&#x79D2;&#x3002;&#x9ED8;&#x8BA4;&#x662F;5ms</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">--pluginpath &#x6216; -P</li>\n</ul>\n<p class=\"calibre12\">&#x53EF;&#x4EE5;&#x5199;&#x81EA;&#x5DF1;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x7528;&#x8BE5;&#x53C2;&#x6570;&#x52A0;&#x8F7D;&#x5B83;&#x4EEC;&#x3002;</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">--verbose</li>\n</ul>\n<p class=\"calibre12\">&#x8F93;&#x51FA;&#x4E00;&#x5B9A;&#x7684;&#x8C03;&#x8BD5;&#x65E5;&#x5FD7;</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">--debug</li>\n</ul>\n<p class=\"calibre12\">&#x8F93;&#x51FA;&#x66F4;&#x591A;&#x7684;&#x8C03;&#x8BD5;&#x65E5;&#x5FD7;</p>\n<h2 id=\"3&#x3001;&#x5B9E;&#x73B0;&#x957F;&#x671F;&#x8FD0;&#x884C;\" class=\"calibre13\">3&#x3001;&#x5B9E;&#x73B0;&#x957F;&#x671F;&#x8FD0;&#x884C;</h2>\n\n        </div>\n    \n</div>\n\n        \n    \n\n\n\n</body></div>",
  "slug": 6588877,
  "title": "di_si_jie_logstash_pei_zhi"
}