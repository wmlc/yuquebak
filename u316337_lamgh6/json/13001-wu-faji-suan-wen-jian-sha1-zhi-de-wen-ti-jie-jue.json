{
  "body_html": "\n\n  \n    1、无法计算文件sha1值的问题解决\n    \n    \n    \n    \n    \n  <link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910235-976bcd3a-7a9c-473d-b800-1b1df54807d4.css\" rel=\"stylesheet\" type=\"text/css\" />\n<link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910286-64db0dd0-ac29-46fb-9241-76ef318b1b53.css\" rel=\"stylesheet\" type=\"text/css\" />\n\n  \n        \n<div class=\"page\">\n    \n        <h1 class=\"book-chapter\" id=\"calibre_toc_59\">1、无法计算文件sha1值的问题解决</h1>\n        <div class=\"section\">\n            <h1 id=\"1、问题描述：\" class=\"calibre7\">1、问题描述：</h1>\n<p class=\"calibre12\">（1）、运行新开发“plugin_process_check_phase2”脚本中，发现很多文件无法计算其sha1的值。</p>\n<p class=\"calibre12\">（2）、单独运行lynis脚本，确认脚本可以计算处对应文件sha1的值。</p>\n<p class=\"calibre12\">（3）、在crontab定时任务中运行，无法获取文件的sha1值</p>\n<p class=\"calibre12\">问题定位：crontab 定时任务没有sudo执行权限。</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">在定时任务中运行lynis的结果</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">process_info[]=secure   31260  0.0  0.0 115376  2004 pts/1    S+   15:38   0:00 bash\nprocess_file_sha1[]=\nprocess_file_sha1[]=\nprocess_file_sha1[]=\nprocess_file_sha1[]=\nprocess_file_sha1[]=\nprocess_file_sha1[]=\n</code></pre><ul class=\"calibre17\">\n<li class=\"calibre18\">直接在控制台运行lynis脚本的结果</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">process_info[]=secure   31260  0.0  0.0 115376  2000 pts/1    S+   15:38   0:00 bash\nprocess_file_sha1[]=df16df1a33aa62da08d5f17fce54d9b07f639925  /usr/lib/systemd/systemd\nprocess_file_sha1[]=74ae1fb5bc22eae1e09e746fb042fceaf7262c6f  /usr/lib/systemd/systemd-journald\nprocess_file_sha1[]=897ee8844a719efc93c367bca7e2d4cd0e586481  /usr/lib/systemd/systemd-udevd\nprocess_file_sha1[]=e2e506d318612f8e53ad1d7b26b61a6590b76f25  /sbin/auditd\nprocess_file_sha1[]=187b499684b4cc6f65e9120ca6aecc67ceee3a18  /usr/sbin/rsyslogd\nprocess_file_sha1[]=aec41e1cc44983bba26afd3e3b3e3fd155eb1959  /bin/dbus-daemon\nprocess_file_sha1[]=32295164de3fb737cd232dc3eea9c9ce1fd3f45a  /usr/bin/gapd\nprocess_file_sha1[]=e032556fd2fd3f552107b57f43a282d6ae5c4281  /usr/lib/systemd/systemd-logind\n</code></pre><h1 id=\"2、解决办法\" class=\"calibre7\">2、解决办法</h1>\n<p class=\"calibre12\">修改/etc/sudoers文件，修改方法，注释掉</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">#\n# Disable \"ssh hostname sudo &lt;cmd&gt;\", because it will show the password in clear. \n#         You have to run \"ssh -t hostname sudo &lt;cmd&gt;\".\n#\n#Defaults    requiretty\n</code></pre><h1 id=\"3、评估带来的风险\" class=\"calibre7\">3、评估带来的风险</h1>\n<ol class=\"calibre2\">\n<li class=\"calibre18\"><p class=\"calibre12\">编辑 /etc/sudoers</p>\n<p class=\"calibre12\">1）Defaults    requiretty，修改为 #Defaults    requiretty，表示不需要控制终端。</p>\n<p class=\"calibre12\">2）Defaults    requiretty，修改为 Defaults:nobody !requiretty，表示仅 nobody 用户不需要控制终端。</p>\n</li>\n</ol>\n<p class=\"calibre12\"><a href=\"https:_www.2cto.com_os_201306_216238\" target=\"_blank\" class=\"pcalibre pcalibre2 pcalibre1 calibre20\">https://www.2cto.com/os/201306/216238.html</a></p>\n\n        </div>\n    \n</div>\n\n        \n    \n\n\n\n",
  "slug": 6588805,
  "title": "13001-wu-faji-suan-wen-jian-sha1-zhi-de-wen-ti-jie-jue"
}