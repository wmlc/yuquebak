{
  "body_html": "<div><head></head><body>&#x7B2C;&#x4E8C;&#x8282; &#x642D;&#x5EFA;&#x5BA2;&#x6237;&#x7AEF;&#x73AF;&#x5883;\n    \n    \n    \n    \n    \n  <link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910235-976bcd3a-7a9c-473d-b800-1b1df54807d4.css\" rel=\"stylesheet\" type=\"text/css\">\n<link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910286-64db0dd0-ac29-46fb-9241-76ef318b1b53.css\" rel=\"stylesheet\" type=\"text/css\">\n\n  \n        \n<div class=\"page\">\n    \n        <h1 class=\"book-chapter\" id=\"calibre_toc_47\">&#x7B2C;&#x4E8C;&#x8282; &#x642D;&#x5EFA;&#x5BA2;&#x6237;&#x7AEF;&#x73AF;&#x5883;</h1>\n        <div class=\"section\">\n            <h1 id=\"&#x7B2C;&#x4E8C;&#x8282;-&#x642D;&#x5EFA;&#x5BA2;&#x6237;&#x7AEF;&#x73AF;&#x5883;\" class=\"calibre7\">&#x7B2C;&#x4E8C;&#x8282; &#x642D;&#x5EFA;&#x5BA2;&#x6237;&#x7AEF;&#x73AF;&#x5883;</h1>\n<h2 id=\"1&#x3001;&#x5B89;&#x88C5;nginx\" class=\"calibre8\">1&#x3001;&#x5B89;&#x88C5;Nginx</h2>\n<h3 id=\"11&#x3001;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7684;redhat&#x7248;&#x672C;\" class=\"calibre9\">1.1&#x3001;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7684;redhat&#x7248;&#x672C;</h3>\n<h3 id=\"12&#x3001;&#x5B89;&#x88C5;nginx&#x7684;yum&#x6E90;\" class=\"calibre9\">1.2&#x3001;&#x5B89;&#x88C5;nginx&#x7684;yum&#x6E90;</h3>\n<p class=\"calibre12\">&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x6839;&#x636E;redhat&#x4E0D;&#x540C;&#x7684;&#x7248;&#x672C;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x4E0D;&#x540C;&#x7684;yum&#x6E90;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x7CFB;&#x7EDF;&#x662F;redhat 7 &#x6240;&#x4EE5;&#x5B89;&#x88C5;&#x7684;yum&#x6E90;&#x7684;&#x7248;&#x672C;&#x4E5F;&#x662F;7</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n</code></pre><p class=\"calibre12\">&#x9875;&#x9762;&#x5C55;&#x793A;&#xFF1A;\n<img alt src=\"data/img/1588213919182-87901b38-5b78-446b-b653-cf7b13bf7e8c.png\" class=\"calibre14\"></p>\n<h3 id=\"13&#x3001;&#x67E5;&#x770B;nginx-&#x4FE1;&#x606F;\" class=\"calibre9\">1.3&#x3001;&#x67E5;&#x770B;nginx &#x4FE1;&#x606F;</h3>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">yum info nginx\n</code></pre><p class=\"calibre12\">&#x5C55;&#x793A;&#x4FE1;&#x606F;&#xFF1A;\n<img alt src=\"data/img/1588213919242-3277d38e-56be-4f79-afc1-b740ae240b46.png\" class=\"calibre14\"></p>\n<h3 id=\"14&#x3001;&#x5B89;&#x88C5;\" class=\"calibre9\">1.4&#x3001;&#x5B89;&#x88C5;</h3>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">yum install nginx\n</code></pre><p class=\"calibre12\"><img alt src=\"data/img/1588213919281-d0758f9f-06fe-4c4f-a977-e3d00db47b83.png\" class=\"calibre14\"></p>\n<h3 id=\"15&#x3001;&#x542F;&#x52A8;\" class=\"calibre9\">1.5&#x3001;&#x542F;&#x52A8;</h3>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">service nginx start\n</code></pre><p class=\"calibre12\"><img alt src=\"data/img/1588213919322-78968c5f-d91a-4ca9-af7f-2fd8cb33486d.png\" class=\"calibre14\"></p>\n<p class=\"calibre12\"><img alt src=\"data/img/1588213919367-1798b339-d8d9-4678-a666-a70c24f6d400.png\" class=\"calibre14\"></p>\n<h3 id=\"16&#x3001;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;\" class=\"calibre9\">1.6&#x3001;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;</h3>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">service nginx stop\nservice nginx reload\n</code></pre><h3 id=\"17&#x3001;&#x76F8;&#x5173;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x4FE1;&#x606F;\" class=\"calibre9\">1.7&#x3001;&#x76F8;&#x5173;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</h3>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">/etc/nginx/nginx.conf\n</code></pre><ul class=\"calibre17\">\n<li class=\"calibre18\">&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x8DEF;&#x5F84;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">#&#x53C2;&#x89C1;nginx.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;\nerror_log  /var/log/nginx/error.log warn;\n</code></pre><ul class=\"calibre17\">\n<li class=\"calibre18\">&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">#&#x53C2;&#x89C1;nginx.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;\naccess_log  /var/log/nginx/access.log  main;\n</code></pre><ul class=\"calibre17\">\n<li class=\"calibre18\">&#x65E5;&#x5FD7;&#x683C;&#x5F0F;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">#&#x53C2;&#x89C1;nginx.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;\nlog_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;\n                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;\n                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;\n</code></pre><ul class=\"calibre17\">\n<li class=\"calibre18\">&#x5F15;&#x5165;&#x5176;&#x4ED6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">#&#x53C2;&#x89C1;nginx.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;\ninclude /etc/nginx/conf.d/*.conf;\n</code></pre><ul class=\"calibre17\">\n<li class=\"calibre18\">web&#x76EE;&#x5F55;&#x4F4D;&#x7F6E;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">#&#x53C2;&#x89C1;/etc/nginx/default.conf &#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x914D;&#x7F6E;\nlocation / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n</code></pre><pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">/usr/share/nginx/html\n\n[anbc@localhost html]$ ll\n&#x603B;&#x7528;&#x91CF; 8\n-rw-r--r--. 1 root root 537 5&#x6708;  31 22:09 50x.html\n-rw-r--r--. 1 root root 612 5&#x6708;  31 22:09 index.html\n</code></pre><h2 id=\"2&#x3001;&#x5B89;&#x88C5;logstash&#x5BA2;&#x6237;&#x7AEF;\" class=\"calibre13\">2&#x3001;&#x5B89;&#x88C5;Logstash&#x5BA2;&#x6237;&#x7AEF;</h2>\n<p class=\"calibre12\">&#x8BE6;&#x89C1;&#x7B2C;&#x4E00;&#x7AE0; &#x7B2C;&#x4E8C;&#x8282;</p>\n<h2 id=\"3&#x3001;&#x914D;&#x7F6E;redis&#x8F93;&#x51FA;\" class=\"calibre13\">3&#x3001;&#x914D;&#x7F6E;redis&#x8F93;&#x51FA;</h2>\n<p class=\"calibre12\">&#x901A;&#x8FC7;&#x914D;&#x7F6E;redis&#x8F93;&#x51FA;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x8F93;&#x51FA;&#x5230;&#x8FDC;&#x7A0B;&#x7684;redis&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;</p>\n<h1 id=\"4&#x3001;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;\" class=\"calibre7\">4&#x3001;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;</h1>\n<h2 id=\"41&#x3001;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x6743;&#x9650;&#x95EE;&#x9898;\" class=\"calibre8\">4.1&#x3001;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x6743;&#x9650;&#x95EE;&#x9898;</h2>\n<p class=\"calibre12\"><strong class=\"calibre16\">&#x95EE;&#x9898;&#x63CF;&#x8FF0;&#xFF1A;</strong></p>\n<p class=\"calibre12\">nginx&#x65E5;&#x5FD7;&#x6743;&#x9650;&#x4E3A;&#xFF1A;</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">[anbc@localhost sbin]$ cd /var/log/nginx/\n[anbc@localhost nginx]$ ll\n&#x603B;&#x7528;&#x91CF; 16\n-rw-r-----. 1 nginx adm 1017 7&#x6708;   6 18:50 access.log\n-rw-r-----. 1 nginx adm  878 7&#x6708;   6 13:30 access.log-20160706\n-rw-r-----. 1 nginx adm  214 7&#x6708;   6 14:44 error.log\n-rw-r-----. 1 nginx adm  522 7&#x6708;   6 13:30 error.log-20160706\n</code></pre><p class=\"calibre12\">&#x53EA;&#x7ED9;&#x4E86;&#x7528;&#x6237;nginx&#x548C;&#x7528;&#x6237;&#x7EC4;adm&#x4EE5;&#x8BFB;&#x6743;&#x9650;&#x3002;</p>\n<p class=\"calibre12\">Logstash&#x8FDB;&#x7A0B;&#x7684;&#x8FD0;&#x884C;&#x6743;&#x9650;&#x4E3A;&#xFF1A;</p>\n<p class=\"calibre12\"><img alt src=\"data/img/1588213919424-dbee1035-146c-4c1b-a494-8cc30de33498.png\" class=\"calibre14\"></p>\n<p class=\"calibre12\">logstash&#x4EE5;anbc&#x7528;&#x6237;&#x8FD0;&#x884C;&#xFF0C;&#x6CA1;&#x6709;&#x8BFB;&#x53D6;access.log&#x7B49;&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x3002;</p>\n<p class=\"calibre12\"><strong class=\"calibre16\">&#x95EE;&#x9898;&#x89E3;&#x51B3;&#xFF1A;</strong></p>\n<p class=\"calibre12\">(1)&#x3001;&#x5C06;logstash&#x7528;&#x6237;&#x52A0;&#x5165;adm&#x7528;&#x6237;&#x7EC4;</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">sudo gpasswd -a logstash adm\n</code></pre><p class=\"calibre12\">(2)&#x3001;&#x4F7F;&#x7528;&#x4E00;&#x4E0B;&#x547D;&#x4EE4;&#xFF0C;&#x4EE5;&#x201C;logstash&#x201D;&#x7528;&#x6237;&#x6743;&#x9650;&#x8FD0;&#x884C;&#x201D;logstash&#x201C;&#x8FDB;&#x7A0B;&#x3002;</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">sudo -u logstash /opt/logstash/bin/logstash -f /etc/logstash/conf.d/client.conf\n</code></pre>\n        </div>\n    \n</div>\n\n        \n    \n\n\n\n</body></div>",
  "slug": 6588851,
  "title": "di_er_jie_da_jian_ke_hu_duan_huan_jing"
}