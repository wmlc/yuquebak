{
  "body_html": "\n\n  \n    第三节 ftp服务搭建\n    \n    \n    \n    \n    \n  <link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910235-976bcd3a-7a9c-473d-b800-1b1df54807d4.css\" rel=\"stylesheet\" type=\"text/css\" />\n<link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910286-64db0dd0-ac29-46fb-9241-76ef318b1b53.css\" rel=\"stylesheet\" type=\"text/css\" />\n\n  \n        \n<div class=\"page\">\n    \n        <h1 class=\"book-chapter\" id=\"calibre_toc_49\">第三节 ftp服务搭建</h1>\n        <div class=\"section\">\n            <h1 id=\"第三节-ftp服务搭建\" class=\"calibre7\">第三节 ftp服务搭建</h1>\n<h2 id=\"1、ftp服务器搭建\" class=\"calibre8\">1、ftp服务器搭建</h2>\n<h3 id=\"11、ftp服务器安装\" class=\"calibre9\">1.1、ftp服务器安装</h3>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">yum -y install vsftpd\n</code></pre><h3 id=\"12、ftp服务器配置\" class=\"calibre9\">1.2、ftp服务器配置</h3>\n<p class=\"calibre12\">ftp服务器安装目录：</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">[root@xxxx]# whereis vsftpd\nvsftpd: /usr/sbin/vsftpd /etc/vsftpd /usr/share/man/man8/vsftpd.8.gz\n</code></pre><p class=\"calibre12\">服务器配置文件目录：</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">/etc/vsftpd/vsftpd.conf\n</code></pre><p class=\"calibre12\">配置禁止匿名用户访问</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\"># Example config file /etc/vsftpd/vsftpd.conf\n#\n# The default compiled in settings are fairly paranoid. This sample file\n# loosens things up a bit, to make the ftp daemon more usable.\n# Please see vsftpd.conf.5 for all compiled in defaults.\n#\n# READ THIS: This example file is NOT an exhaustive list of vsftpd options.\n# Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's\n# capabilities.\n#\n# Allow anonymous FTP? (Beware - allowed by default if you comment this out).\nanonymous_enable=NO\n</code></pre><h2 id=\"2、ftp客户端配置\" class=\"calibre13\">2、ftp客户端配置</h2>\n<h3 id=\"21、安装\" class=\"calibre9\">2.1、安装</h3>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">yum install ftp\n</code></pre><h3 id=\"22、调整访问模式\" class=\"calibre9\">2.2、调整访问模式</h3>\n<p class=\"calibre12\">异常提示：</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">227 Entering Passive Mode (10,130,203,4,173,137).\n</code></pre><p class=\"calibre12\">FTP有两种工作模式，PORT方式和PASV方式，中文意思为主动式和被动式 ，详细介绍如下：</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">主动 FTP:</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">命令连接：客户端 &gt;1024 端口 → 服务器 21 端口\n数据连接：客户端 &gt;1024 端口 ← 服务器 20 端口\n</code></pre><ul class=\"calibre17\">\n<li class=\"calibre18\">被动FTP：</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">命令连接：客户端 &gt;1024 端口 → 服务器 21 端口\n数据连接：客户端 &gt;1024 端口 ← 服务器 &gt;1024 端口\n</code></pre><p class=\"calibre12\">PORT（主动）方式的连接过程是：客户端向服务器的FTP端口（默认是21）发送连接请求，服务器接受连接，建立一条命令链路。当需要传送数据时， 客户端在命令链路上用PORT命令告诉服务器：“我打开了xxx端口，你过来连接我”。于是服务器从20端口向客户端的xxxx端口发送连接请求，建立一条数据链路来传送数据。 </p>\n<p class=\"calibre12\">PASV（被动）方式的连接过程是：客户端向服务器的FTP端口（默认是21）发送连接请求，服务器接受连接，建立一条命令链路。当需要传送数据时， 服务器在命令链路上用PASV命令告诉客户端：“我打开了xxx端口，你过来连接我”。于是客户端向服务器的xxxx端口发送连接请求，建立一条数据链 路来传送数据。</p>\n<p class=\"calibre12\">解决此问题的办法也很简单，关闭客户端的PASV方式，强制其用PORT方式访问服务器，登录FTP服务器后用passive命令关闭客户端的PASV方式，如下：</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">   ftp&gt;passive\n   Passive mode off.\n   ftp&gt;passive (再次运行命令可打开)\n   Passive mode on\n</code></pre>\n        </div>\n    \n</div>\n\n        \n    \n\n\n\n",
  "slug": 6588863,
  "title": "di_san_jie_ftp_jie_kou_pei_zhi"
}