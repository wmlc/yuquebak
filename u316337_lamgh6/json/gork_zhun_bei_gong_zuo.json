{
  "body_html": "\n\n  \n    gork 准备工作\n    \n    \n    \n    \n    \n  <link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910235-976bcd3a-7a9c-473d-b800-1b1df54807d4.css\" rel=\"stylesheet\" type=\"text/css\" />\n<link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910286-64db0dd0-ac29-46fb-9241-76ef318b1b53.css\" rel=\"stylesheet\" type=\"text/css\" />\n\n  \n        \n<div class=\"page\">\n    \n        <h1 class=\"book-chapter\">gork 准备工作</h1>\n        <div class=\"section\">\n            <h1 id=\"gork-准备工作\" class=\"calibre7\">gork 准备工作</h1>\n<h2 id=\"1、调试工具的准备\" class=\"calibre8\">1、调试工具的准备</h2>\n<p class=\"calibre12\">安装ruby</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">yum install ruby\n[root@localhost ~]# yum install ruby\n[root@localhost ~]# ruby -v\nruby 2.0.0p598 (2014-11-13) [x86_64-linux]\n</code></pre><p class=\"calibre12\">安装gem包</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">[root@localhost ~]# gem install jls-grok awesome_print\nFetching: cabin-0.8.1.gem (100%)\nSuccessfully installed cabin-0.8.1\nFetching: jls-grok-0.11.3.gem (100%)\nSuccessfully installed jls-grok-0.11.3\nParsing documentation for cabin-0.8.1\nInstalling ri documentation for cabin-0.8.1\nParsing documentation for jls-grok-0.11.3\nInstalling ri documentation for jls-grok-0.11.3\nFetching: awesome_print-1.7.0.gem (100%)\nSuccessfully installed awesome_print-1.7.0\nParsing documentation for awesome_print-1.7.0\nInstalling ri documentation for awesome_print-1.7.0\n3 gems installed\n</code></pre><p class=\"calibre12\">开发调试工具</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">vim grokdebug.rb\n</code></pre><p class=\"calibre12\">注意：第三行中的jls-grok的版本要和之前安装的版本一致</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">#!/usr/bin/env ruby\nrequire 'rubygems'\ngem 'jls-grok', '=0.11.3'\nrequire 'grok-pure'\nrequire 'optparse'\nrequire 'ap'\n\noptions = {}\nARGV.push('-h') if ARGV.size === 0\nOptionParser.new do |opts|\n  opts.banner = 'Run grokdebug at your terminal.'\n  options[:dirs] = %w(patterns)\n  options[:named] = false\n  opts.on('-d DIR1,DIR2', '--dirs DIR1,DIR2', Array, 'Set grok patterns directories. Default: \"./patterns\"') do |value|\n    options[:dirs] = value\n  end\n  opts.on('-m MESSAGE', '--msg MESSAGE', 'Your raw message to be matched') do |value|\n    options[:message] = value\n  end\n  opts.on('-p PATTERN', '--pattern PATTERN', 'Your grok pattern to be compiled') do |value|\n    options[:pattern] = value\n  end\n  opts.on('-n', '--named', 'Named captures only') do\n    options[:named] = true\n  end\nend.parse!\n\ngrok = Grok.new\noptions[:dirs].each do |dir|\n  if File.directory?(dir)\n    dir = File.join(dir, \"*\")\n  end\n  Dir.glob(dir).each do |file|\n    grok.add_patterns_from_file(file)\n  end\nend\ngrok.compile(options[:pattern], options[:named])\nap grok.match(options[:message]).captures()\n</code></pre><h2 id=\"2、grokdebug的使用\" class=\"calibre13\">2、grokdebug的使用</h2>\n<p class=\"calibre12\">例如：</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">./grokdebug.rb \n                 -d /root/logstash-patterns-core/patterns \n                 -m \"5.3.244.1 GET /index.html 15824 0.043\" \n                 -p \"%{IP:client} %{WORD:method} %{URIPATHPARAM:request} %{NUMBER:bytes} %{NUMBER:duration}\"\n</code></pre><p class=\"calibre12\">其中：</p>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">-d :用于指定已有正则表达式文件的路径。这里可以指向<code class=\"pcalibre5 pcalibre6 calibre19\">logstash-patterns-core</code>项目的文件夹；也可以指向logstash程序的<code class=\"pcalibre5 pcalibre6 calibre19\">/opt/logstash/vendor/bundle/jruby/1.9/gems/logstash-patterns-core-2.0.5</code></li>\n<li class=\"calibre18\">-m :待解析的目标字符串</li>\n<li class=\"calibre18\">-p :用于解析目标字符串的正则表达式</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">{\n       \"client\" =&gt; [\n        [0] \"5.3.244.1\"\n    ],\n         \"IPV6\" =&gt; [\n        [0] nil\n    ],\n         \"IPV4\" =&gt; [\n        [0] \"5.3.244.1\"\n    ],\n       \"method\" =&gt; [\n        [0] \"GET\"\n    ],\n      \"request\" =&gt; [\n        [0] \"/index.html\"\n    ],\n      \"URIPATH\" =&gt; [\n        [0] \"/index.html\"\n    ],\n     \"URIPARAM\" =&gt; [\n        [0] nil\n    ],\n        \"bytes\" =&gt; [\n        [0] \"15824\"\n    ],\n    \"BASE10NUM\" =&gt; [\n        [0] \"15824\",\n        [1] \"0.043\"\n    ],\n     \"duration\" =&gt; [\n        [0] \"0.043\"\n    ]\n}\n</code></pre><h2 id=\"3、部署rails\" class=\"calibre13\">3、部署Rails</h2>\n<h3 id=\"31、安装rvm\" class=\"calibre9\">3.1、安装rvm</h3>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">rvm 全称Ruby Version Manager，是一个非常好ruby版本管理和安装工具。</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">curl -sSL https://get.rvm.io | bash -s stable\n</code></pre><ul class=\"calibre17\">\n<li class=\"calibre18\">出错后，执行以下代码解决错误<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">curl -sSL https://rvm.io/mpapis.asc | gpg2 --import -\n</code></pre></li>\n</ul>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">安装rails</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">gem install rails\n</code></pre><p class=\"calibre12\">安装rails框架</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">[root@localhost ~]# gem install rails\n</code></pre><p class=\"calibre12\">rails 部署安装：\n<a href=\"http:_guides.ruby-china.org_getting_started\" target=\"_blank\" class=\"pcalibre pcalibre2 pcalibre1 calibre20\">http://guides.ruby-china.org/getting_started.html</a></p>\n<p class=\"calibre12\">Rails中Bootstrap的安装和使用\n<a href=\"http://blog.csdn.net/lissdy/article/details/9195651\" target=\"_blank\" class=\"pcalibre pcalibre2 pcalibre1 calibre20\">http://blog.csdn.net/lissdy/article/details/9195651</a></p>\n<p class=\"calibre12\"><a href=\"http://my.oschina.net/u/913344/blog/365433\" target=\"_blank\" class=\"pcalibre pcalibre2 pcalibre1 calibre20\">http://my.oschina.net/u/913344/blog/365433</a>\nRails中使用Bootstrap<br class=\"calibre21\" /><a href=\"http://blog.163.com/fuhaocn@126/blog/static/366650802013414262295/\" target=\"_blank\" class=\"pcalibre pcalibre2 pcalibre1 calibre20\">http://blog.163.com/fuhaocn@126/blog/static/366650802013414262295/</a></p>\n\n        </div>\n    \n</div>\n\n        \n    \n\n\n\n",
  "slug": 6588892,
  "title": "gork_zhun_bei_gong_zuo"
}