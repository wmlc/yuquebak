{
  "body_html": "<div><head></head><body>grok &#x63D2;&#x4EF6;&#x7684;&#x5C5E;&#x6027;\n    \n    \n    \n    \n    \n  <link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910235-976bcd3a-7a9c-473d-b800-1b1df54807d4.css\" rel=\"stylesheet\" type=\"text/css\">\n<link href=\"https://www.yuque.com/attachments/yuque/0/2020/css/491128/1588213910286-64db0dd0-ac29-46fb-9241-76ef318b1b53.css\" rel=\"stylesheet\" type=\"text/css\">\n\n  \n        \n<div class=\"page\">\n    \n        <h1 class=\"book-chapter\">grok &#x63D2;&#x4EF6;&#x7684;&#x5C5E;&#x6027;</h1>\n        <div class=\"section\">\n            <h1 id=\"grok-&#x63D2;&#x4EF6;&#x7684;&#x5C5E;&#x6027;\" class=\"calibre7\">grok &#x63D2;&#x4EF6;&#x7684;&#x5C5E;&#x6027;</h1>\n<h2 id=\"1&#x3001;addfield&#x5C5E;&#x6027;\" class=\"calibre8\">1&#x3001;add_field&#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;hash</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;{}</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;\n  &#x5728;&#x6587;&#x6863;&#xFF08;document&#xFF09;&#x4E2D;&#x589E;&#x52A0;&#x4E00;&#x4E2A; field&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;%{field}&#x52A8;&#x6001;&#x547D;&#x540D;field&#x540D;&#x6216;field&#x7684;&#x503C;&#x3002;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">filter {\n  grok {\n    add_field =&gt; {\n      &quot;foo_%{somefield}&quot; =&gt; &quot;Hello world, from %{host}&quot;\n      &quot;new_field&quot; =&gt; &quot;new_static_value&quot;\n    }\n  }\n}\n</code></pre><h2 id=\"2&#x3001;addtag&#x5C5E;&#x6027;\" class=\"calibre13\">2&#x3001;add_tag&#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;array</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;[]</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;&#x8BE5;&#x5C5E;&#x6027;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5728;&#xFF0C;tags&#x4E2D;&#x52A0;&#x5165;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x6807;&#x7B7E;&#x6765;&#x52A0;&#x5165;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x6B21;&#x52A0;&#x5165;&#x591A;&#x4E2A;tags&#x503C;&#x3002;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">filter {\n  grok {\n    add_tag =&gt; [ &quot;foo_%{somefield}&quot; ]\n  }\n}\n</code></pre><pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\"># You can also add multiple tags at once:\nfilter {\n  grok {\n    add_tag =&gt; [ &quot;foo_%{somefield}&quot;, &quot;taggedy_tag&quot;]\n  }\n}\n</code></pre><h2 id=\"breakonmatch&#x5C5E;&#x6027;\" class=\"calibre13\">break_on_match&#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;boolean</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;true</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;&#x7528;&#x4E8E;&#x6807;&#x8BC6;&#x5339;&#x914D;&#x540E;&#xFF0C;&#x662F;&#x5426;&#x505C;&#x6B62;&#x6B64;&#x6B21;filter&#x540E;&#x7EED;&#x7684;&#x5904;&#x7406;&#x903B;&#x8F91;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x662F;ture&#xFF0C;&#x610F;&#x4E3A;&#x4F1A;&#x505C;&#x6B62;&#x3002;</li>\n</ul>\n<h2 id=\"keepemptycaptures&#x5C5E;&#x6027;\" class=\"calibre13\">keep_empty_captures&#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x5C5E;&#x6027;&#xFF1A;boolean</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;false</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;If true, keep empty captures as event fields.\n&#x4F5C;&#x7528;&#x8FD8;&#x4E0D;&#x6E05;&#x695A;</li>\n</ul>\n<h2 id=\"match&#x5C5E;&#x6027;\" class=\"calibre13\">match&#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x5C5E;&#x6027;&#xFF1A;hash</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;{}</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">filter \n{\n    grok \n    { \n        match =&gt; \n        { \n            &quot;message&quot; =&gt; \n            [ \n                &quot;Duration: %{NUMBER:duration}&quot;, \n                &quot;Speed: %{NUMBER:speed}&quot; \n            ] \n        } \n\n    }\n}\n</code></pre><h2 id=\"namedcapturesonly\" class=\"calibre13\">named_captures_only</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;boolean</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;true</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;If true, only store named captures from grok.</li>\n</ul>\n<h2 id=\"overwrite\" class=\"calibre13\">overwrite</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x5F97;&#x7C7B;&#x578B;&#xFF1A;array</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;[]</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;:&#x7528;&#x65B0;&#x751F;&#x6210;&#x7684;&#x503C;&#x6765;&#x8986;&#x76D6;&#x539F;&#x6709;field&#x7684;&#x503C;&#x3002;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">filter {\n  grok {\n    match =&gt; { &quot;message&quot; =&gt; &quot;%{SYSLOGBASE} %{DATA:message}&quot; }\n    overwrite =&gt; [ &quot;message&quot; ]\n  }\n}\n</code></pre><p class=\"calibre12\">&#x5982;&#x679C;&#x65E5;&#x5FD7;&#x662F;<code class=\"pcalibre5 pcalibre6 calibre19\">May 29 16:37:11 sadness logger: hello world</code>&#x7ECF;&#x8FC7;match&#x5C5E;&#x6027;<code class=\"pcalibre5 pcalibre6 calibre19\">match =&gt; { &quot;message&quot; =&gt; &quot;%{SYSLOGBASE} %{DATA:message}&quot; }</code>&#x5904;&#x7406;&#x540E;&#xFF0C;message&#x7684;&#x503C;&#x53D8;&#x6210;&#x4E86;<code class=\"pcalibre5 pcalibre6 calibre19\">hello world</code>&#x3002;&#x8FD9;&#x65F6;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E86;<code class=\"pcalibre5 pcalibre6 calibre19\">overwrite =&gt; [ &quot;message&quot; ]</code>&#x5C5E;&#x6027;&#xFF0C;&#x90A3;&#x4E48;&#x539F;&#x6765;&#x7684;message&#x7684;&#x503C;&#x5C06;&#x88AB;&#x8986;&#x76D6;&#x6210;&#x65B0;&#x503C;&#x3002;</p>\n<h2 id=\"patternsdir-&#x5C5E;&#x6027;\" class=\"calibre13\">patterns_dir &#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;array</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;[]</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;&#x4E00;&#x4E9B;&#x590D;&#x6742;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4E0D;&#x9002;&#x5408;&#x76F4;&#x63A5;&#x5199;&#x5230;filter&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x7528;&#x6765;&#x4E13;&#x95E8;&#x4FDD;&#x5B58;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x8BE5;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x90FD;&#x4F1A;&#x88AB;&#x4F9D;&#x6B21;&#x52A0;&#x8F7D;&#xFF0C;&#x5305;&#x62EC;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x3002;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">patterns_dir =&gt; [&quot;/opt/logstash/patterns&quot;, &quot;/opt/logstash/extra_patterns&quot;]\n</code></pre><p class=\"calibre12\">&#x6B63;&#x5219;&#x6587;&#x4EF6;&#x4EE5;&#x6587;&#x672C;&#x683C;&#x5F0F;&#x63CF;&#x8FF0;&#xFF1A;</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">NAME PATTERN\n#&#x7A7A;&#x683C;&#x524D;&#x662F;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x7A7A;&#x683C;&#x540E;&#x662F;&#x5177;&#x4F53;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;\n</code></pre><p class=\"calibre12\">&#x4F8B;&#x5982;&#xFF1A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x7684;&#x8868;&#x8FBE;&#x5F0F;</p>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\">NUMBER \\d+\n</code></pre><h2 id=\"patternsfileglob&#x5C5E;&#x6027;\" class=\"calibre13\">patterns_file_glob&#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;string</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;&#x201C;*&#x201D;</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;&#x9488;&#x5BF9;patterns_dir&#x5C5E;&#x6027;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#x5939;&#x91CC;&#x54EA;&#x4E9B;&#x6B63;&#x5219;&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;filter&#x4E2D;&#x751F;&#x6548;&#xFF0C;&#x9700;&#x8981;&#x672C;&#x5C5E;&#x6027;&#x6765;&#x6307;&#x5B9A;&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x201C;*&#x201D;&#x662F;&#x6307;&#x6240;&#x6709;&#x6B63;&#x5219;&#x6587;&#x4EF6;&#x90FD;&#x751F;&#x6548;&#x3002;</li>\n</ul>\n<h2 id=\"periodicflush&#x5C5E;&#x6027;\" class=\"calibre13\">periodic_flush&#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;boolean</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;false</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;ture&#xFF0C;&#x4F1A;&#x5B9A;&#x65F6;&#x7684;&#x8C03;&#x7528;filter&#x7684;&#x66F4;&#x65B0;&#x51FD;&#x6570;&#xFF08;flush method&#xFF09;</li>\n</ul>\n<h2 id=\"removefield\" class=\"calibre13\">remove_field</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;array</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;[]</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;&#x5220;&#x9664;&#x5F53;&#x524D;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x6307;&#x5B9A;filted</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\"># You can also remove multiple fields at once:\nfilter \n{\n    grok \n    {\n        remove_field =&gt; \n        [ \n            &quot;foo_%{somefield}&quot;, \n            &quot;my_extraneous_field&quot; \n        ]\n    }\n}\n</code></pre><h2 id=\"removetag&#x5C5E;&#x6027;\" class=\"calibre13\">remove_tag&#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;array</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;[]</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;&#x5220;&#x9664;&#x6307;&#x5B9A;&#x7684;tag&#x503C;</li>\n</ul>\n<pre class=\"calibre10\"><code class=\"pcalibre4 pcalibre3 calibre11\"># You can also remove multiple tags at once:\nfilter {\n  grok {\n    remove_tag =&gt; [ &quot;foo_%{somefield}&quot;, &quot;sad_unwanted_tag&quot;]\n  }\n}\n</code></pre><h2 id=\"tagonfailure&#x5C5E;&#x6027;\" class=\"calibre13\">tag_on_failure&#x5C5E;&#x6027;</h2>\n<ul class=\"calibre17\">\n<li class=\"calibre18\">&#x503C;&#x7684;&#x7C7B;&#x578B;&#xFF1A;array</li>\n<li class=\"calibre18\">&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;[&quot;_grokparsefailure&quot;]</li>\n<li class=\"calibre18\">&#x63CF;&#x8FF0;&#xFF1A;&#x5982;&#x679C;&#x6240;&#x6709;&#x6B63;&#x5219;&#x89C4;&#x5219;&#x90FD;&#x6CA1;&#x6709;&#x5339;&#x914D;&#xFF0C;&#x5219;&#x5728;tags&#x4E2D;&#x8FFD;&#x52A0;&#x8BE5;&#x503C;&#x3002;</li>\n</ul>\n\n        </div>\n    \n</div>\n\n        \n    \n\n\n\n</body></div>",
  "slug": 6588893,
  "title": "grok_cha_jian_de_shu_xing"
}